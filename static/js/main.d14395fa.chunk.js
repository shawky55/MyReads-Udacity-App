(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{25:function(e,t,n){},31:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),s=n(26),a=n.n(s),r=(n(31),n(8)),i=n(4),l=n.n(i),u=n(6),d=n(5),j=(n(25),n(19)),h="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:b},p=function(){return fetch("".concat(h,"/books"),{headers:f}).then((function(e){return e.json()})).then((function(e){return e.books}))},O=function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(j.a)(Object(j.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},x=function(e,t){return fetch("".concat(h,"/search"),{method:"POST",headers:Object(j.a)(Object(j.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},k=n(14),v=n(3),m=n(2),g=function(e){var t=e.shelf,n=e.book,c=e.updateBook;return Object(m.jsx)("div",{className:"book-shelf-changer",children:Object(m.jsxs)("select",{defaultValue:t,onChange:function(e){console.log("changed"),c(n,e.target.value)},children:[Object(m.jsx)("option",{disabled:!0,children:"Move to..."}),Object(m.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(m.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(m.jsx)("option",{value:"read",children:"Read"}),Object(m.jsx)("option",{value:"none",children:"None"})]})})},y=function(e){var t=e.book,n=e.cover,c=e.title,o=e.author,s=e.shelf,a=e.updateBook;return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"book",children:[Object(m.jsxs)("div",{className:"book-top",children:[Object(m.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(n,")")}}),Object(m.jsx)(g,{updateBook:a,shelf:s,book:t})]}),Object(m.jsx)("div",{className:"book-title",children:c}),Object(m.jsx)("div",{className:"book-authors",children:o})]})})},N=function(e){var t=e.message;return Object(m.jsx)("div",{className:"empty-container",children:Object(m.jsxs)("h1",{className:"empty-com",children:[t," "]})})},B=function(e){var t=e.books,n=e.title,c=e.updateBook,o=[];return t.length&&(o=t.filter((function(e){return e.shelf===n}))),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"bookshelf",children:[Object(m.jsx)("h2",{className:"bookshelf-title",children:n}),Object(m.jsx)("div",{className:"bookshelf-books",children:0===o.length?Object(m.jsx)(N,{message:"There no Books Avaliable on the Shelf"}):Object(m.jsx)("ol",{className:"books-grid",children:o.map((function(e){return Object(m.jsx)(y,{id:e.id,cover:e.imageLinks.thumbnail,title:e.title,shelf:e.shelf,book:e,updateBook:c,author:e.authors},e.id)}))})})]})})},w=function(e){var t=e.header;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"list-books-title",children:Object(m.jsx)("h1",{children:t})})})},S=function(e){var t=e.updateBook,n=e.identifyBooks,o=Object(c.useState)(""),s=Object(d.a)(o,2),a=s[0],r=s[1],i=Object(c.useState)([]),j=Object(d.a)(i,2),h=j[0],b=j[1],f=function(e){var t=n(),c=e.map((function(e){return t.has(e.id)?t.get(e.id):e}));b(c)};Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,x(a);case 3:void 0===(t=e.sent)||(null===t||void 0===t?void 0:t.error)||f(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){f([])}}),[a]);return Object(m.jsxs)(m.Fragment,{children:[" ",Object(m.jsxs)("div",{className:"search-books",children:[Object(m.jsxs)("div",{className:"search-books-bar",children:[Object(m.jsx)(k.b,{to:"/",className:"close-search",children:"Close"}),Object(m.jsx)("div",{className:"search-books-input-wrapper",children:Object(m.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",onChange:function(e){return r(e.target.value)},value:a})})]}),Object(m.jsx)("div",{className:"search-books-results",children:Object(m.jsx)("ol",{className:"books-grid",children:h.length?h.map((function(e){var n;return Object(m.jsx)(y,{id:e.id,cover:null===(n=e.imageLinks)||void 0===n?void 0:n.thumbnail,title:e.title,shelf:e.shelf?e.shelf:"none",book:e,updateBook:t,author:e.author&&e.authors[0]},e.id)})):null})})]})]})};var R=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],o=t[1],s=function(){var e=new Map;return n.forEach((function(t){e.set(t.id,t)})),e};Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var a=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s(),i=[],a.has(t.id)?i="none"===c?n.filter((function(e){return e.id!==t.id})):n.map((function(e){return e.id===t.id&&(e.shelf=c),e})):(t.shelf=c,i=[].concat(Object(r.a)(n),[t])),o(i),e.next=6,O(t,c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(k.a,{children:Object(m.jsxs)(v.c,{children:[Object(m.jsx)(v.a,{path:"/search",element:Object(m.jsx)(S,{updateBook:a,identifyBooks:s})}),Object(m.jsx)(v.a,{path:"/",element:Object(m.jsxs)("div",{className:"list-books",children:[Object(m.jsx)(w,{header:"My Reads"}),Object(m.jsx)("div",{className:"list-books-content",children:Object(m.jsxs)("div",{children:[Object(m.jsx)(B,{updateBook:a,title:"currentlyReading",books:n}),Object(m.jsx)(B,{updateBook:a,books:n,title:"wantToRead"}),Object(m.jsx)(B,{updateBook:a,books:n,title:"read"})]})}),Object(m.jsx)(k.b,{className:"open-search-btn open-search",to:"/search",children:"Add a book"})]})}),Object(m.jsx)(v.a,{path:"*",element:Object(m.jsx)(N,{message:"Page not Found"})})]})})})};a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(R,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.d14395fa.chunk.js.map